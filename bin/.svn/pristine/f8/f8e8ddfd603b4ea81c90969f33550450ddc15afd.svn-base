/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package com.occularpharma.core.generaterepot.controller;

import com.occularpharma.core.generaterepot.service.GeneratereportService;
import com.occularpharma.core.maintainparlevels.model.PharmaCdmDispenseqty;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class Generatereportcontroller {

    public Generatereportcontroller() {
    }
       
    @Autowired
    GeneratereportService reportService;
    /**
     *
     * @return
     */
    /**
     * **topahfsdescriptions Redirection Page redirected to
     * topahfsdescriptions.jsp
     *
     **
     * @return
     */
    @RequestMapping(value = "/top_ahfsdescription", method = RequestMethod.GET)
    public ModelAndView redirectAhfsdescription() {
        return new ModelAndView("generatereport/topahfsdescriptions");

    }

    /**
     *
     * @return
     */
    /**
     * **topcorporatedescription Redirection Page redirected to
     * topcorporatedescription.jsp
     *
     **
     * @return
     */
    @RequestMapping(value = "/top_corporatedescription", method = RequestMethod.GET)
    public ModelAndView redirectCorporatedescription() {
        return new ModelAndView("generatereport/topcorporatedescription");

    }

    /**
     *
     * @param selectyear
     * @param ahfscdesc
     * @param genname
     * @return
     *caling getvolumeVariance() function in pricevariance.jsp page
     */
    /* Displaying volume variance data in  Price variance.jsp page*/
    @RequestMapping(value = "/getReportvolumevariance", method = RequestMethod.GET)
    public @ResponseBody
    String reportVolumevariance(@RequestParam("selectdata") String selectyear, @RequestParam("ahfsdesc") String[] ahfscdesc, @RequestParam("genname") String genname) {
        String reportvaiance = reportService.getReportvariance(selectyear, ahfscdesc, genname);
        return reportvaiance;

    }

    /**
     *
     * @return Inventory Level Status
     */
    /**
     * **Displaying Inventory Level Status in Report page **
     */
    @RequestMapping(value = "/inventoryStatus", method = RequestMethod.GET)
    public @ResponseBody
    String inventoryStatus(@RequestParam("genname") String genname,@RequestParam("drugclassification") String drugclassification,@RequestParam("percentvalue") String percentvalue,@RequestParam("maxpercent") String maxpercent) {
        String inventorystatus = reportService.inventoryStatus(genname,drugclassification,percentvalue,maxpercent);
        return inventorystatus;
    }
   

    /**
     *
     * @param cdmNumber
     * @return
     */
    // update cin Numbers of Cdm in pricevariance.jsp
    @RequestMapping(value = "/displaycinofcdm", method = RequestMethod.POST)
    @ResponseBody
    public String updateCinnumbers(@RequestParam("cdmNumber") String cdmNumber) {
        String responsemessage = reportService.updatereportCinNumbers(cdmNumber);
        return responsemessage;
    }

    /**
     *
     * @param cdm
     * @param ndc
     * @param cin
     * @param chargedesc
     * @param orderqty
     * @return
     */
    /**
     *
     * Insert purchase order data into inprocesstable in inventorystatus.jsp
     * page
     *
     * @param cdm
     * @param ndc
     * @param chargedesc
     * @param cin
     * @param orderqty
     * @return
     */
    @RequestMapping(value = "/insertInprocesstable", method = RequestMethod.POST)
    @ResponseBody
    public String insertInprocessreportdata(@RequestParam("cdm") String cdm, @RequestParam("ndc") String ndc, @RequestParam("cin") String cin, @RequestParam("chargedesc") String chargedesc, @RequestParam("orderqty") String orderqty) {
        String responsemessage = reportService.insertInprocessdata(cdm, ndc, cin, chargedesc, orderqty);
        return responsemessage;
    }
    @RequestMapping(value = "/displayDrugutilizationgraph", method = RequestMethod.POST)
    @ResponseBody                                                                  
    public  List<PharmaCdmDispenseqty> displayDrugutilizationgraph(@RequestParam("startdate") String startdate, @RequestParam("enddate") String enddate,@RequestParam("ahfsvalue") String ahfsvalue, @RequestParam("label_genericname") String label_genericname, @RequestParam("label_desc") String label_desc, @RequestParam("cinNumber") String cinNumber) {
         List<PharmaCdmDispenseqty> pharma_cdmdisp=null;
        pharma_cdmdisp = reportService.displayDrugutilizationgraph(startdate, enddate, ahfsvalue, label_genericname, label_desc,cinNumber);
        return pharma_cdmdisp;
    }
    @RequestMapping(value = "/drugutilizationTrendgraph", method = RequestMethod.POST)
    @ResponseBody                                                                  
    public  List<PharmaCdmDispenseqty> drugutilizationtreendgraph(@RequestParam("startdate") String startdate, @RequestParam("enddate") String enddate,@RequestParam("ahfsvalue") String ahfsvalue, @RequestParam("label_genericname") String label_genericname, @RequestParam("label_desc") String label_desc, @RequestParam("cinNumber") String cinNumber) {
         List<PharmaCdmDispenseqty> resultgraphval=null;
        resultgraphval = reportService.utilizationTrendgraph(startdate, enddate, ahfsvalue, label_genericname, label_desc,cinNumber);
        return resultgraphval;
    }
    
     @RequestMapping(value = "/getutilizationtabledata", method = RequestMethod.POST)
    public @ResponseBody
    List utilizationtab(@RequestParam("startdate") String startdate, @RequestParam("enddate") String enddate,@RequestParam("ahfsvalue") String ahfsvalue, @RequestParam("label_genericname") String label_genericname, @RequestParam("label_desc") String label_desc, @RequestParam("cinNumber") String cinNumber) {
        List getresult=null;
         getresult = reportService.getutilizaitonreport(startdate, enddate, ahfsvalue, label_genericname, label_desc,cinNumber);
        return getresult;
    }
}
